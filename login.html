<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Municipality Address Check — Login</title>
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet" />
  <style>
    :root{ --green:#22c55e; --green-700:#16a34a; --border:#e5e7eb; --muted:#f3f4f6; --ink:#111827; --error:#b91c1c; }
    *{box-sizing:border-box}
    body{ font-family:Lato,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; background:#f4f4f9; color:var(--ink); }

    /* header: align back link left (no spacer div) */
    .header-wrapper{ display:flex; align-items:center; justify-content:flex-start; width:92%; max-width:420px; margin:12px auto 0; }
    .back-link{ text-decoration:none; color:#111; font-size:13px; padding:8px 10px; border-radius:9999px; background:#fff; border:1px solid var(--border); }
    .back-link:hover{ background:var(--muted); }

    h1{ font-size:16px; font-weight:700; width:92%; max-width:420px; margin:10px auto 0; }

    .card{ width:92%; max-width:420px; background:#fff; border:1px solid var(--border); border-radius:12px; padding:16px; box-shadow:0 4px 10px rgba(0,0,0,.04); }
    .row{ display:grid; grid-template-columns:1fr; gap:6px; margin-bottom:10px; }
    .row label{ font-size:14px; font-weight:700; }
    .input{ width:100%; padding:12px; border:1px solid #ccc; border-radius:8px; font-size:14px; }
    .input:focus{ outline:none; border-color:#0073e6; }
    .input.error{ border-color:var(--error); }
    .error-text{ font-size:12px; color:var(--error); display:none; }

    .checkbox-row{ display:flex; align-items:center; gap:8px; margin:8px 0 6px; }

    .button{ width:100%; padding:12px 20px; font-size:14px; background:var(--green); color:#fff; border:none; border-radius:10px; cursor:pointer; font-weight:700; }
    .button:hover{ background:var(--green-700); }

    /* links row: don't stretch; wrap nicely */
    .links{ display:flex; justify-content:flex-start; gap:12px; margin-top:12px; flex-wrap:wrap; }
    .links a{ font-size:13px; color:#111; text-decoration:none; white-space:nowrap; }
    .links a:hover{ text-decoration:underline; }

    .toast{ position:fixed; bottom:16px; left:50%; transform:translateX(-50%); background:#111827; color:#fff; padding:10px 14px; border-radius:10px; font-size:13px; display:none; }
  </style>
</head>
<body>
  <div class="header-wrapper">
    <a class="back-link" href="./boundary.html">← Back</a>
  </div>

  <h1>Municipality Address Check</h1>

  <div class="card">
    <form id="loginForm" novalidate>
      <div class="row">
        <label for="email">Email</label>
        <input id="email" class="input" type="email" placeholder="you@example.com" autocomplete="username" required />
        <div id="emailErr" class="error-text">Please enter a valid email.</div>
      </div>

      <div class="row">
        <label for="password">Password</label>
        <div style="position:relative;">
          <input id="password" class="input" type="password" placeholder="Your password" autocomplete="current-password" required />
          <button type="button" id="togglePw" aria-label="Show password" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); background:none; border:none; cursor:pointer; font-size:12px; color:#111;">Show</button>
        </div>
        <div id="pwErr" class="error-text">Password must be at least 8 characters.</div>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="remember" />
        <label for="remember" style="font-weight:400;">Remember me on this device</label>
      </div>

      <button id="signInBtn" class="button" type="submit">Sign in</button>

      <div class="links">
        <a href="./register.html">Register</a>
        <a href="./forgot-id.html">Forgot User ID</a>
        <a href="./forgot-password.html">Forgot Password</a>
      </div>
    </form>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    const pw = document.getElementById('password');
    const tgl = document.getElementById('togglePw');
    tgl.addEventListener('click', ()=>{
      const showing = pw.type === 'text';
      pw.type = showing ? 'password' : 'text';
      tgl.textContent = showing ? 'Show' : 'Hide';
      tgl.setAttribute('aria-label', showing ? 'Show password' : 'Hide password');
    });

    const email = document.getElementById('email');
    const emailErr = document.getElementById('emailErr');
    const pwErr = document.getElementById('pwErr');
    const form = document.getElementById('loginForm');
    const btn = document.getElementById('signInBtn');
    const toast = document.getElementById('toast');

    function toastMsg(msg){ toast.textContent=msg; toast.style.display='block'; setTimeout(()=>toast.style.display='none',2000); }
    function validEmail(v){ return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(v); }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      email.classList.remove('error'); emailErr.style.display='none';
      pw.classList.remove('error'); pwErr.style.display='none';

      let ok = true;
      if (!validEmail(email.value.trim())) { email.classList.add('error'); emailErr.style.display='block'; ok = false; }
      if ((pw.value||'').length < 8) { pw.classList.add('error'); pwErr.style.display='block'; ok = false; }
      if (!ok) return;

      btn.disabled=true; btn.textContent='Signing in…';
      try{
        // TODO: hook to your backend / WordPress if needed.
        await new Promise(r=>setTimeout(r,700));
        window.location.href = './connections.html'; // post-login landing (can change)
      }catch(err){
        toastMsg('Login failed'); 
      }finally{
        btn.disabled=false; btn.textContent='Sign in';
      }
    });
  </script>
</body>
</html>
